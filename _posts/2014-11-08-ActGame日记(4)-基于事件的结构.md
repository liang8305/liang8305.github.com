---
layout : post
categories: [游戏开发]
tags : [cocos2dx, 游戏开发]
keywords : cocos2dx, 游戏开发
excerpt: 
---
{% include JB/setup %}


##问题

如果先按单机战斗进行开发, 如何可以很方便的扩展成实时多人联网战斗 ?

##思考

是否可以做到每一部分代码只负责一部分事情, 跟其他没有关联? cocos2dx v3已经将事件处理封装的很好了, 那就可以将事件流作为整体的设计

这个设计类似MVC, 如左边的图, 

<img src="/assets/images/posts/201411081503.png" width="800px"/>

* `world` 是处理中心, 整个游戏的运算都在这里进行
* `player` 和 `monster` 仅仅是 `client` 端的一个展示(VIEW), 他们不负责任何`运算`工作, 仅仅接收`world`的事件, 然后做展示
* `gamepad` 和 `ai`都是控制器, 控制器只发送 `action`动作事件给处理中心`world`

如果变成多人游戏:

* `world` 将在server端实现
* `player`不用大变, 仅仅是接收 `world`发来的事件进行展示; 把event加个playerid, 然后同屏幕添加多个player实例即可

##遗留问题

* 如果多人游戏, 如何做同步? 例如移动同步

